@inherits DNNrocketAPI.render.DNNrocketTokens<Simplisity.SimplisityRazor>
@using DNNrocketAPI;
@using Simplisity;

@AddMetaData("resourcepath", "/DesktopModules/DNNrocket/api/App_LocalResources/")
@AddMetaData("resourcepath", "/DesktopModules/DNNrocket/TestForm/App_LocalResources/")

@{
    var info = (SimplisityInfo)Model.List.First();
}

<h1>@ResourceKey("testform.testformlist") 2</h1>

<span class="w3-section">
    <button class="w3-button w3-green w3-padding-8 simplisity_click" s-cmd="testform_add" s-return="#testformlist2" s-fields="theme:config-w3,template:TestFormList2.cshtml,interfacekey:testform,listname:testlist2">@ResourceKey("DNNrocket.cmdAddButton")</button>
    <button class="w3-button w3-teal w3-padding-8 fileuploadaction" >@ResourceKey("DNNrocket.cmdUploadButton")</button>
    <a class="w3-button w3-pale-yellow w3-padding-8 simplisity_itemundo" s-recylebin="testlist2bin" s-return="#sortlist2" s-removelist=".testlist2" style="display: none;">@ResourceKey("DNNrocket.cmdUndoButton")</a>
</span>
<script>
    $(".fileuploadaction").unbind().click(function () {
        $('#imagefileupload').trigger('click');
    });
</script>

<div class="w3-panel w3-white w3-rest" style="border-style:dotted">
    <input id="imagefileupload" class="simplisity_fileupload" s-cmd="testform_addimage" s-cmdurl="/desktopmodules/dnnrocket/api/api.ashx" s-return="#testformlist2" s-fields="theme:config-w3,template:TestFormList2.cshtml,interfacekey:testform,listname:testlist2" type="file" name="files[]" multiple style="display:none;">
    <p><i>@ResourceKey("DNNrocket.dropimage")...</i></p>
</div>


<ul id="sortlist2" class="w3-ul">
    @{
        var lp = 1;
    }
    @foreach (var i in info.GetList("testlist2"))
    {

        <li class="testlist2 w3-card w3-margin w3-display-container">

            <div class="w3-row w3-margin">
                <div class="w3-threequarter">
                    <div>
                        <label>Text Input (Standard)</label>
                        <!-- We use the "row" paramater on the razor token to get a unique id for each row.  This MUST be added-->
                        @TextBox(i, "genxml/textbox/list2txt", "class='w3-input w3-border' maxlength='50' type='text' ", "Razor Token Input Text", false, lp)
                    </div>
                    <div>
                        @EditFlag()&nbsp;<label>Text Input (Localized)</label>
                        @TextBox(i, "genxml/textbox/list2txtlang", "class='w3-input w3-border' maxlength='50' type='text'", "Localized Razor Token Input Text", true, lp)
                    </div>
                </div>
                <div class="w3-rest">
                    <a href="javascript:void(0)" class="simplisity_removelistitem w3-display-right " s-removelist=".testlist2" s-recylebin="testlist2bin"><i title="Remove" class="fa fa-minus-square fa-fw fa-lg"></i></a>
                </div>
            </div>
        </li>

        lp += 1;
    }
</ul>

