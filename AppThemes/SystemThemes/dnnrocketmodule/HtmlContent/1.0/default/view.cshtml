@inherits RocketMod.RocketModTokens<Simplisity.SimplisityRazor>
@using System.Linq
@using Simplisity;
@using RocketMod;


@AddProcessData("resourcepath", "/DesktopModules/DNNrocket/api/App_LocalResources/")
@AddProcessData("resourcepath", "/DesktopModules/DNNrocket/RocketMod/App_LocalResources/")
@AddProcessData("resourcepath", "/DesktopModules/DNNrocket/AppThemes/Themes/HtmlContent/resx/")


@RenderTemplate("editiframe.cshtml", "/DesktopModules/DNNrocket/rocketmod", "config-w3", Model, "1.0", true)

@{
    var articleDataList = (ArticleDataList)Model.List.First();
    var lp1 = 0;
}

    <div class="w3-display-container">


        @foreach (SimplisityInfo i in articleDataList.DataList)
        {
            lp1 += 1;
            if (!i.GetXmlPropertyBool("genxml/checkbox/hide"))
            {
                i.SetXmlProperty("genxml/rowindex", lp1.ToString());
                i.SetXmlProperty("genxml/rowitemid", i.ItemID.ToString());
                Model.Datainfo = i;
                var layout = i.GetXmlPropertyInt("genxml/select/layout");
                var layouttemplate = "displaytext" + layout + ".cshtml";

                if (i.GetXmlProperty("genxml/lang/genxml/textbox/header") != "" && !i.GetXmlPropertyBool("genxml/checkbox/noheader"))
                {
                    var headerstyle = i.GetXmlProperty("genxml/select/headerstyle");
                    var hstart = "<" + headerstyle + ">";
                    var hend = "</" + headerstyle + ">";
                    <div class="w3-padding">
                        @HtmlOf(hstart)@i.GetXmlProperty("genxml/lang/genxml/textbox/header")@HtmlOf(hend)
                    </div>
                }

                <h1>@layouttemplate</h1>

                @RenderTemplate(layouttemplate, "/DesktopModules/DNNrocket/AppThemes", "HtmlContent", Model)

                if (i.GetXmlProperty("genxml/lang/genxml/hidden/document1") != "")
                {
                    var justify = "w3-left-align";
                    if (i.GetXmlPropertyInt("genxml/hidden/layoutdocument1") == 1)
                    {
                        justify = "w3-center";
                    }
                    if (i.GetXmlPropertyInt("genxml/hidden/layoutdocument1") == 2)
                    {
                        justify = "w3-right-align";
                    }

                    <div class="w3-row @justify">
                        @DownloadDocument(i.ItemID, @lp1, "document1", i.GetXmlProperty("genxml/textbox/namedocument1"))
                    </div>
                }

                if (i.GetXmlProperty("genxml/select/internallink1") != "")
                {
                    var justify = "w3-left-align";
                    if (i.GetXmlPropertyInt("genxml/hidden/layoutinternallink1") == 1)
                    {
                        justify = "w3-center";
                    }
                    if (i.GetXmlPropertyInt("genxml/hidden/layoutinternallink1") == 2)
                    {
                        justify = "w3-right-align";
                    }

                    var openInNewWindow = false;
                    if (i.GetXmlPropertyBool("genxml/checkbox/blankinternallink1"))
                    {
                        openInNewWindow = true;
                    }
                    <div class="w3-row @justify">
                        @LinkPageURL(i, "genxml/select/internallink1")
                    </div>
                }

                if (i.GetXmlProperty("genxml/textbox/externallink1") != "")
                {
                    var justify = "w3-left-align";
                    if (i.GetXmlPropertyInt("genxml/hidden/layoutexternallink1") == 1)
                    {
                        justify = "w3-center";
                    }

                    if (i.GetXmlPropertyInt("genxml/hidden/layoutexternallink1") == 2)
                    {
                        justify = "w3-right-align";
                    }

                    var openInNewWindow = false;
                    if (i.GetXmlPropertyBool("genxml/checkbox/blankexternallink1"))
                    {
                        openInNewWindow = true;
                    }
                    <div class="w3-row @justify">
                        @LinkURL(i, "genxml/textbox/externallink1", openInNewWindow)
                    </div>
                }


                <div style="clear: both;" class="w3-margin"></div>

            }
        }


    </div>
