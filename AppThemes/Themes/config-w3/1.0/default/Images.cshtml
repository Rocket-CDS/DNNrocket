@inherits RocketMod.RocketModTokens<Simplisity.SimplisityRazor>
@using DNNrocketAPI;
@using Simplisity;
@using RocketSettings;
@using DNNrocketAPI.Componants;

@AddProcessData("resourcepath", "/DesktopModules/DNNrocket/api/App_LocalResources/")
@AddProcessData("resourcepath", "/DesktopModules/DNNrocket/SystemData/App_LocalResources/")
@AddProcessData("resourcepath", "/DesktopModules/DNNrocket/RocketMod/App_LocalResources/")

@{
    var settingsData = new SettingsData(0, 0, DNNrocketUtils.GetEditCulture());
    if (Model.List.Count > 0)
    {
        settingsData = (SettingsData)Model.List.First();
    }
}

<span class="w3-section simplisity_buttons">
    <a class="w3-button w3-pale-yellow w3-padding-8" onclick="location.reload();">@ResourceKey("DNNrocket.cmdCancelButton")</a>
    <a class="w3-button w3-teal w3-padding-8 simplisity_click" s-cmd="rocketsettings_add" s-fields="tabid:-1,moduleid:-1,parentitemid:@settingsData.Info.ParentItemId,selecteditemid:@settingsData.Info.ItemID,interfacekey:images">@ResourceKey("DNNrocket.cmdAddButton")</a>
    <span class="w3-button w3-green w3-padding-8 simplisity_click  simplisity_langchange activatevalidation" s-cmd="rocketsettings_save" s-fields="tabid:-1,moduleid:-1,parentitemid:@settingsData.Info.ParentItemId,selecteditemid:@settingsData.Info.ItemID,interfacekey:images" s-list=".settingsdata">@ResourceKey("DNNrocket.cmdSaveButton")</span>
    <a class="w3-button w3-pale-yellow w3-padding-8 simplisity_itemundo" s-recylebin="settingsbin" s-return="#datalist" s-removelist=".settingsdata" style="display: none;">@ResourceKey("DNNrocket.cmdUndoButton")</a>
</span>

@{
    Model.Settings.Remove("menunumber");
    Model.Settings.Remove("parentitemid");
    Model.Settings.Add("menunumber", "4");
    Model.Settings.Add("parentitemid", @settingsData.Info.ParentItemId.ToString());
}

@RenderTemplate("AppThemeMenu.cshtml", "/DesktopModules/DNNrocket/AppThemes/Admin", "config-w3", Model, "1.0")

<div id="datasection" class="w3-container">

    <ul id="datalist" class="w3-ul">

        @{
            var lp3 = 0;
        }
        @foreach (var i in settingsData.List)
        {
            lp3 += 1;

            var settingsdataclassselect = "dictionarydata" + lp3;
            var imagesizeclass = "imagesize" + lp3;

            <li class="settingsdata w3-card w3-margin w3-display-container w3-col m3 @settingsdataclassselect ">

                @SortableListIndex(i, lp3)

                <span id="deletebutton@(lp3)" onclick="" class="w3-button w3-display-topright simplisity_removelistitem" s-removelist=".settingsdata" s-recylebin="settingsbin">
                    <i title="Remove" class="fas fa-minus-square fa-fw fa-lg"></i>
                </span>
                <div class="w3-col w3-padding">
                    @ImageEdit(i, "imagepath", 100, 100, "", false, lp3)
                </div>

            </li>

        }

    </ul>

</div>

@RenderImageSelect(Model, 640, true, false)

<script>
    $(document).ready(function () {
        $(':checkbox').addClass('w3-check');

        $("#datalist").sortable();
        $("#datalist").disableSelection();

    });
</script>
