@inherits RocketMod.RocketModTokens<Simplisity.SimplisityRazor>
@using DNNrocketAPI;
@using Simplisity;
@using RocketSettings;
@using RocketMod;

@AddMetaData("resourcepath", "/DesktopModules/DNNrocket/api/App_LocalResources/")
@AddMetaData("resourcepath", "/DesktopModules/DNNrocketModules/RocketMod/App_LocalResources/")
@AddMetaData("resourcepath", "/DesktopModules/DNNrocketModules/AppThemes/HtmlContent/resx/")

@{
    var moduleData = (ModuleData)Model.List.First();

}


<span class="w3-section simplisity_buttons">
    <a class="w3-button w3-pale-yellow w3-padding-8" onclick="location.reload();">@ResourceKey("DNNrocket.cmdCancelButton")</a>
    <a class="w3-button w3-teal w3-padding-8 simplisity_click" s-cmd="rocketmod_add" s-fields="tabid:@(moduleData.TabId),moduleid:@(moduleData.ModuleId),selecteditemid:@moduleData.ItemId,interfacekey:edit">@ResourceKey("DNNrocket.cmdAddButton")</a>
    <button class="w3-button w3-green w3-padding-8 simplisity_langchange simplisity_click rocketmodsavebutton" s-cmd="rocketmod_save" s-fields="tabid:@(moduleData.TabId),moduleid:@(moduleData.ModuleId),selecteditemid:@moduleData.ItemId,interfacekey:edit" s-post="#datasection" s-list=".settingsdata">@ResourceKey("DNNrocket.cmdSaveButton")</button>
    <a class="w3-button w3-pale-yellow w3-padding-8 simplisity_itemundo" s-recylebin="databin" s-return="#datalist" s-removelist=".settingsdata" style="display: none;">@ResourceKey("DNNrocket.cmdUndoButton")</a>
</span>

<div id="datasection">

    <div class="w3-padding w3-rest">
        <h2>Data section</h2>
        <div class="w3-row">
            <div class="w3-padding w3-col m2">
                <label class="">@ResourceKey("RocketPayForm.ref")</label>
                @TextBox(moduleData.Data.Info, "genxml/textbox/href", "class='w3-input w3-border' maxlength='350' autocomplete='off'", "", false)
            </div>
            <div class="w3-padding w3-col m9">
                <label class="">@ResourceKey("RocketPayForm.name")</label>&nbsp;@EditFlag()
                @TextBox(moduleData.Data.Info, "genxml/lang/genxml/textbox/hname", "class='w3-input w3-border' maxlength='350' autocomplete='off'", "", true)
            </div>
        </div>
    </div>

    <div>
        @TabSelectListOnTabId(moduleData.Data.Info, "genxml/select/tabselected", " class='w3-input w3-border' ")
    </div>
    <div>
        @LinkInternalUrl(moduleData.Data.Info.PortalId, moduleData.Data.Info.GetXmlPropertyInt("genxml/select/tabselected"), DNNrocketUtils.GetEditCulture())
    </div>

    <ul id="datalist" class="w3-ul">

        @{
            var lp1 = 0;
        }
        @foreach (SimplisityInfo i in moduleData.List)
        {
            lp1 += 1;
        <li class="settingsdata w3-card w3-margin w3-display-container">

            <div class="listrow">
                <button id="deletebutton@(lp1)" onclick="" class="w3-button w3-display-topright simplisity_removelistitem" s-removelist=".settingsdata" s-recylebin="databin">
                    <i title="Remove" class="fas fa-minus-square fa-fw fa-lg"></i>
                </button>
                <button id="editbutton@(lp1)" onclick="dnnrocket_showdetail(@(lp1))" class="w3-button w3-display-topleft editbutton" >
                    <i class="fas fa-edit"></i>
                </button>

                <div class="w3-row">
                    <div class="w3-col " style="width: 50px; clear:both;">
                        &nbsp;
                    </div>
                    <div class="w3-col " style="width: 200px">
                        @ImageEdit(i, "genxml/hidden/imagerelpath", 100, 100, "", false, lp1)
                    </div>
                    <div class="w3-padding w3-rest">
                        <div class="w3-row">
                            <div class="w3-padding w3-col m2">
                                <label class="">@ResourceKey("RocketPayForm.ref")</label>
                                @TextBox(i, "genxml/textbox/ref", "class='w3-input w3-border' maxlength='350' autocomplete='off'", "", false, lp1)


                            </div>
                            <div class="w3-padding w3-col m9">
                                <label class="">@ResourceKey("RocketPayForm.name")</label>&nbsp;@EditFlag()
                                @TextBox(i, "genxml/lang/genxml/textbox/name", "class='w3-input w3-border' maxlength='350' autocomplete='off'", "", true, lp1)
                            </div>
                            <div class="w3-padding w3-col m1">
                            </div>
                        </div>
                        <div class="w3-row">


                        </div>
                    </div>
                </div>
            </div>


            <!-- The Detail-->
            <div id="detailDisplay@(lp1)" class="w3-container" style="display:none;">
                <div class="" style="">

                    <div class="w3-container ">

                        <div class="w3-row w3-margin">
                            <div class="">
                                @RadioButtonList(i, "genxml/hidden/layout", "0,1,2,3,4,5,6,7,8", "<img src='/DesktopModules/DNNrocket/AppThemes/Themes/HtmlContent/img/Newspaper0.png' style='width:24px;' />,<img src='/DesktopModules/DNNrocket/AppThemes/Themes/HtmlContent/img/Newspaper1.png' style='width:24px;'/>,<img src='/DesktopModules/DNNrocket/AppThemes/Themes/HtmlContent/img/Newspaper2.png' style='width:24px;'/>,<img src='/DesktopModules/DNNrocket/AppThemes/Themes/HtmlContent/img/Newspaper3.png' style='width:24px;'/>,<img src='/DesktopModules/DNNrocket/AppThemes/Themes/HtmlContent/img/Newspaper4.png' style='width:24px;'/>,<img src='/DesktopModules/DNNrocket/AppThemes/Themes/HtmlContent/img/Newspaper5.png' style='width:24px;'/>,<img src='/DesktopModules/DNNrocket/AppThemes/Themes/HtmlContent/img/Newspaper6.png' style='width:24px;'/>,<img src='/DesktopModules/DNNrocket/AppThemes/Themes/HtmlContent/img/Newspaper7.png' style='width:24px;'/>,<img src='/DesktopModules/DNNrocket/AppThemes/Themes/HtmlContent/img/Newspaper8.png' style='width:24px;'/>", "class=''", "0")
                            </div>
                        </div>

                        <div class="w3-row w3-padding">
                            @CKEditor(i, "genxml/lang/genxml/textbox/richtext", "", "", true, lp1)
                        </div>


                        <div class="w3-row w3-padding">
                            <div class="w3-threequarter w3-padding">
                                @TextBox(i, "genxml/lang/genxml/textbox/header", " class='w3-input w3-border' autocomplete='off'", "", true, lp1)
                            </div>
                            <div class="w3-quarter w3-padding">
                                @DropDownList(i, "genxml/select/headerstyle", "H1,H2,H3,H4", "H1,H2,H3,H4", " class='w3-input w3-border' style='width:100px;' ", "H1", false, lp1)
                            </div>
                        </div>

                        <div class="w3-row w3-padding">
                            <div class="w3-container w3-col w3-padding" style="width:140px;">
                                @ImageEdit(i, "genxml/hidden/imagepath1", 100, 100, "", false, lp1)
                            </div>
                            <div class="w3-container w3-col w3-padding" style="width:140px;">
                                @ImageEdit(i, "genxml/hidden/imagepath2", 100, 100, "", false, lp1)
                            </div>
                            <div class="w3-container w3-col w3-padding" style="width:140px;">
                                @ImageEdit(i, "genxml/hidden/imagepath3", 100, 100, "", false, lp1)
                            </div>
                            <div class="w3-container w3-col w3-padding" style="width:140px;">
                                @ImageEdit(i, "genxml/hidden/imagepath4", 100, 100, "", false, lp1)
                            </div>
                            <div class="w3-container w3-col w3-padding" style="width:140px;">
                                @ImageEdit(i, "genxml/hidden/imagepath5", 100, 100, "", false, lp1)
                            </div>
                            <div class="w3-container w3-col w3-padding" style="width:140px;">
                                @ImageEdit(i, "genxml/hidden/imagepath6", 100, 100, "", false, lp1)
                            </div>
                        </div>

                        <div class="w3-row w3-padding">
                            <div class="w3-container w3-margin">
                                @DocumentEdit(i, "document1", " class='w3-input w3-border' ", true, lp1)
                            </div>
                            <div class="w3-container w3-margin">
                                @DocumentEdit(i, "document2", " class='w3-input w3-border' ", true, lp1)
                            </div>
                            <div class="w3-container w3-margin">
                                @DocumentEdit(i, "document3", " class='w3-input w3-border' ", true, lp1)
                            </div>
                            <div class="w3-container w3-margin">
                                @DocumentEdit(i, "document4", " class='w3-input w3-border' ", true, lp1)
                            </div>
                            <div class="w3-container w3-margin">
                                @DocumentEdit(i, "document5", " class='w3-input w3-border' ", true, lp1)
                            </div>
                            <div class="w3-container w3-margin">
                                @DocumentEdit(i, "document6", " class='w3-input w3-border' ", true, lp1)
                            </div>
                        </div>

                        <div class="w3-row w3-padding">

                        </div>


                        <div class="w3-row w3-padding">
                            <button onclick="dnnrocket_hidedetail(@(lp1))" class="w3-button w3-display-bottomleft">
                                <i class="fas fa-caret-up"></i>
                            </button>

                        </div>


                    </div>
                </div>
            </div>


        </li>

        }
        </ul>

        </div>

        <script>
            $(document).ready(function () {
                $(':checkbox').attr('class', 'w3-check');

                $("#datalist").sortable();
                $("#datalist").disableSelection();

            });


            function dnnrocket_showdetail(row) {
                $('#detailDisplay' + row).show();
                $("#datalist").sortable("option", "disabled", true);
                $('#editbutton' + row).html('<i class="fas fa-caret-up"></i>');
                $('#editbutton' + row).attr('onclick', 'dnnrocket_hidedetail(' + row + ')');
                $('#editbutton' + row).addClass('detailopen');                
            }

            function dnnrocket_hidedetail(row) {
                $('#detailDisplay' + row).hide();
                $('#editbutton' + row).html('<i class="fas fa-edit"></i>');
                $('#editbutton' + row).attr('onclick', 'dnnrocket_showdetail(' + row + ')');
                $('#editbutton' + row).removeClass('detailopen');                

                var activatesort = true;
                $('.editbutton').each(function (index) {
                    if ($(this).hasClass('detailopen')) {
                        activatesort = false;
                    }
                });
                if (activatesort) {
                    $("#datalist").sortable("option", "disabled", false);
                }

            }


        </script>


