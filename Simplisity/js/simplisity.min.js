function simplisity_createStaticPageFields(n,t){var i,r;jQuery(".simplisity_loader").remove();jQuery("#simplisity_systemkey").remove();jQuery("#simplisity_cmdurl").remove();jQuery("#simplisity_fileuploadlist").remove();jQuery("#simplisity_fileuploadbase64").remove();i='<div class="'+t.overlayclass+' simplisity_loader ">';i+='<div class="simplisity_loader_inner"><\/div>';i+="<\/div>";i+='<input id="simplisity_systemkey" type="hidden" value="'+t.systemkey+'" />';i+='<input id="simplisity_cmdurl" type="hidden" value="'+n+'" />';i+='<input id="simplisity_fileuploadlist" type="hidden" value="" />';i+='<input id="simplisity_fileuploadbase64" type="hidden" value="" />';r=document.createElement("span");r.innerHTML=i;document.body.appendChild(r)}function simplisity_createTempPageFields(){var t="",n;jQuery("#simplisity_params").length===0&&(t+='<input id="simplisity_params" type="hidden" value="" />',n=document.createElement("span"),n.innerHTML=t,document.body.appendChild(n))}function simplisity_removepagefields(){jQuery("#simplisity_params").remove()}function simplisity_panelAjaxFunction(n){if(typeof n!="undefined"&&n!==""){ajaxPostCmd.pop();var i="#"+jQuery(n).attr("id"),r=jQuery(n).attr("s-activepanel"),t=jQuery("simplisity_cmdurl").val();r&&jQuery(n).activateSimplisityPanel(t);simplisity_callserver(n,t,i);debugmode===!0&&console.log("[simplisity_panelAjaxFunction()] s-cmd: ",jQuery(n).attr("s-cmd"))}}function simplisity_nbxgetCompleted(n){var i,t;if(typeof n.safter!="undefined"&&n.safter!=="")for(i=n.safter.split(","),t=0;t<i.length;t++)typeof window[i[t]]=="function"||typeof window[i[t]]=="object"?window[i[t]]():console.log("ERROR: function does not exist. "+i[t]);simplisity_sessionfieldaction();jQuery('input[id*="simplisity_fileuploadlist"]').val("");jQuery('input[id*="simplisity_fileuploadbase64"]').val("");debugmode===!0&&console.log("-------END AJAX CALL------- ");simplisity_panelAjaxFunction(ajaxPostCmd[ajaxPostCmd.length-1]);jQuery(".simplisity_fadeout").fadeOut(2e3);n.sloader===!0&&jQuery(".simplisity_loader").hide()}function simplisityPost(n,t,i,r,u,f,e,o,s,h,c,l,a,v){var k,y,p,w,b;debugmode===!0&&console.log("[simplisityPost()] scmdurl, scmd, spost, sreturn, slist, sappend, sindex, sfields, shideloader, safter, sdropdownlist:--->    ",n,t,i,r,u,f,e,o,s,h,c);typeof t!="undefined"&&t!==""&&(v==""&&(v=simplisity_sessionpost()),k=simplisity_getsystemkey(o),(typeof l=="undefined"||l==="")&&(l="false"),y="",y=n.includes("?")?n:n+"?cmd="+t+"&systemkey="+k,p=simplisity_ConvertFormToJSON(i,u,o,v),w=simplisity_ConvertParamToJSON(o,v),typeof c!="undefined"&&c!==""?(debugmode===!0&&console.log("------- START AJAX CALL [dropdown] ------- "+t),jQuery.ajax({type:"POST",url:y,cache:!1,"async":!0,dataType:"json",timeout:12e4,data:{inputjson:encodeURIComponent(p),paramjson:encodeURIComponent(w),simplisity_cmd:t},success:function(n){var i,r,u,t;for(jQuery(c).html(""),i=simplisity_parsejson(n),t=0;t<i.length;t++)r=i[t],jQuery(c).append("<option value='"+r.key+"'>"+r.value+"<\/option>");if(typeof h!="undefined"&&h!=="")for(u=h.split(","),t=0;t<u.length;t++)window[u[t]]();s===!0&&jQuery(".simplisity_loader").hide()}})):(debugmode===!0&&console.log("------- START AJAX CALL------- "+t),a==="json"?jQuery.ajax({type:"POST",url:y,cache:!1,"async":!0,dataType:"json",timeout:12e4,data:{inputjson:encodeURIComponent(p),paramjson:encodeURIComponent(w),simplisity_cmd:t},success:function(n){var i,t;if(window.sessionStorage.setItem(r,JSON.stringify(n)),typeof h!="undefined"&&h!=="")for(i=h.split(","),t=0;t<i.length;t++)window[i[t]]();s===!0&&jQuery(".simplisity_loader").hide()}}):(simplisity_setParamField("requeststart",(new Date).toISOString()),b=jQuery.ajax({type:"POST",url:y,"async":!0,cache:!1,timeout:12e4,data:{inputjson:encodeURIComponent(p),paramjson:encodeURIComponent(w),simplisity_cmd:t}}),b.done(function(n){simplisity_setParamField("requestdone",(new Date).toISOString());n!=="noaction"&&(typeof r!="undefined"&&r!==""&&(r==="document"?(document.open(),document.write(n),document.close()):typeof f=="undefined"||f===""||f===!1?(jQuery(r).children().remove(),jQuery(r).html(n).trigger("change")):jQuery(r).append(n).trigger("change")),debugmode===!0,l==="true"?location.reload():jQuery.event.trigger({type:"simplisitypostgetcompleted",cmd:t,sindex:e,sloader:s,sreturn:r,safter:h}),jQuery("#simplisity_params").val(""))}),b.fail(function(){jQuery(".simplisity_loader").hide()}))))}async function simplisity_callBeforeFunction(n){var i,t;try{if(typeof jQuery(n).attr("s-before")!="undefined"&&jQuery(n).attr("s-before")!=="")for(i=jQuery(n).attr("s-before").split(","),t=0;t<i.length;t++)typeof window[i[t]]=="function"||typeof window[i[t]]=="object"?window[i[t]]():console.log("ERROR: function does not exist. "+i[t])}catch(r){console.log("Error!",r)}return}function simplisity_callSessionFields(n){var i,t;if(typeof jQuery(n).attr("s-sessionfield")!="undefined"&&jQuery(n).attr("s-sessionfield")!=="")for(i=jQuery(n).attr("s-sessionfield").split(","),t=0;t<i.length;t++)simplisity_setSessionField(i[t].replace("#",""),jQuery(i[t]).val());return}async function simplisity_callserver(n,t,i,r){var o,h,e,f;try{if(simplisity_setParamField("activevalue",jQuery(n).val()),simplisity_setParamField("simplisity_language",simplisity_getCookieValue("simplisity_language")),simplisity_setParamField("simplisity_editlanguage",simplisity_getCookieValue("simplisity_editlanguage")),o=jQuery(n).attr("s-cmd"),typeof o!="undefined"&&o!==""&&o!==null)if(h=jQuery(n).attr("s-showloader"),h!=="false"&&jQuery(".simplisity_loader").show(),await simplisity_callBeforeFunction(n),jQuery(n).attr("s-stop")!=="stop"){e=jQuery(n).attr("s-cmdurl");(typeof e=="undefined"||e==="")&&(e=t);(typeof e=="undefined"||e==="")&&(e=jQuery("#simplisity_cmdurl").val());f=jQuery(n).attr("s-return");(typeof f=="undefined"||f==="")&&(f=i,(typeof f=="undefined"||f==="")&&(f="#simplisity_startpanel"));typeof jQuery(n).attr("s-reload")!="undefined"&&jQuery(n).attr("s-reload")!==""&&(r=jQuery(n).attr("s-reload"));var c=jQuery(n).attr("s-post"),l=jQuery(n).attr("s-list"),a=jQuery(n).attr("s-append"),v=jQuery(n).attr("s-index"),u=jQuery(n).attr("s-fields"),y=jQuery(n).attr("s-after"),s=jQuery(n).attr("s-hideloader"),p=jQuery(n).attr("s-dropdownlist"),w=jQuery(n).attr("s-returntype");typeof o=="undefined"&&(o="");typeof u=="undefined"&&(u="");typeof s=="undefined"&&(s=!0);jQuery('input[id*="simplisity_fileuploadlist"]').val()!==""&&(u=typeof u=="undefined"||u===""?'{"fileuploadlist":"'+jQuery('input[id*="simplisity_fileuploadlist"]').val()+'"}':u.substring(0,u.length-1)+',"fileuploadlist":"'+jQuery('input[id*="simplisity_fileuploadlist"]').val()+'"}');jQuery('input[id*="simplisity_fileuploadbase64"]').val()!==""&&(u=typeof u=="undefined"||u===""?'{"fileuploadbase64":"'+jQuery('input[id*="simplisity_fileuploadbase64"]').val()+'"}':u.substring(0,u.length-1)+',"fileuploadbase64":"'+jQuery('input[id*="simplisity_fileuploadbase64"]').val()+'"}');simplisity_setSessionField("simplisity_return",f);await simplisity_callSessionFields(n);simplisityPost(e,o,c,f,l,a,v,u,s,y,p,r,w,"")}else jQuery(n).attr("s-stop",""),jQuery(".simplisity_loader").hide()}catch(b){console.log("Error!",b)}return}function simplisity_ConvertParamToJSON(n,t){var r={sfield:[],system:[]},i={},u,f,e,o;return typeof n!="undefined"&&n!==""&&(u=simplisity_parsejson(n),i=simplisity_mergeJson({},i,u)),typeof t!="undefined"&&t!==""&&(f=simplisity_parsejson(t),i=simplisity_mergeJson({},i,f)),r.sfield.push(i),e='{"systemkey":"'+simplisity_getsystemkey(n)+'","requesturl":"'+window.location.href+'"}',o=simplisity_parsejson(e),r.system.push(o),debugmode===!0&&console.log("[simplisity_ConvertParamToJSON(sfields)] stringify json: "+simplisity_stringifyjson(r)),simplisity_stringifyjson(r)}function simplisity_ConvertFormToJSON(n,t,i,r){var u={sfield:[],system:[],postdata:[],listdata:[]},e,o,f,s,h,c,l;return typeof n!="undefined"&&n!==""&&(e=n.split(","),e.forEach(n=>{jQuery(n).find("input, textarea, select").each(function(){var i=this.getAttribute("type"),t;i!==""&&i!=="checkbox"&&i!=="text"&&i!=="radio"&&i!=="select"&&i!=="hidden"&&(i="hidden");this.getAttribute("s-update")!=="ignore"&&this.id!==""&&(this.getAttribute("s-datatype")==="coded"?(postvalue=this.value||"",postvalue=simplisity_encode(postvalue)):postvalue=this.value||"",t={},t.id=this.id||"",t.value=postvalue,t["s-post"]=n||"",t["s-update"]=this.getAttribute("s-update")||"",t["s-datatype"]=this.getAttribute("s-datatype")||"",t["s-xpath"]=this.getAttribute("s-xpath")||"",t.type=i||"select",t.checked=jQuery(this).prop("checked")||"",t.name=this.getAttribute("name")||"",u.postdata.push(t))})})),typeof t!="undefined"&&t!==""&&(o=t.split(","),o.forEach(n=>{var t=1;jQuery(n).each(function(){jQuery(this).find("input, textarea, select").each(function(){var r=this.getAttribute("type"),i;r!==""&&r!=="checkbox"&&r!=="text"&&r!=="radio"&&r!=="select"&&r!=="hidden"&&(r="hidden");this.getAttribute("s-update")!=="ignore"&&this.id!==""&&(this.getAttribute("s-datatype")==="coded"?(postvalue=this.value||"",postvalue=simplisity_encode(postvalue)):postvalue=this.value||"",i={},i.id=this.id||"",i.value=postvalue||"",i.row=t.toString()||"",i.listname=n||"",i["s-update"]=this.getAttribute("s-update")||"",i["s-datatype"]=this.getAttribute("s-datatype")||"",i["s-xpath"]=this.getAttribute("s-xpath")||"",i.type=r||"select",i.checked=jQuery(this).prop("checked")||"",i.name=this.getAttribute("name")||"",u.listdata.push(i))});t+=1})})),f={},typeof i!="undefined"&&i!==""&&(s=simplisity_parsejson(i),f=simplisity_mergeJson({},f,s)),typeof r!="undefined"&&r!==""&&(h=simplisity_parsejson(r),f=simplisity_mergeJson({},f,h)),u.sfield.push(f),c='{"systemkey":"'+simplisity_getsystemkey(i)+'"}',l=simplisity_parsejson(c),u.system.push(l),debugmode===!0&&console.log("json: "+simplisity_stringifyjson(u)),simplisity_stringifyjson(u)}function simplisity_getpostjson(n){var t={postdata:[]},i;return typeof n!="undefined"&&n!==""&&(i=n.split(","),i.forEach(n=>{jQuery(n).find("input, textarea, select").each(function(){if(this.getAttribute("s-update")!=="ignore"&&this.id!==""){this.getAttribute("s-datatype")==="coded"?(postvalue=this.value||"",postvalue=simplisity_encode(postvalue)):postvalue=this.value||"";var i={};i.id=this.id||"";i.value=postvalue;i["s-post"]=n||"";i["s-update"]=this.getAttribute("s-update")||"";i["s-datatype"]=this.getAttribute("s-datatype")||"";i["s-xpath"]=this.getAttribute("s-xpath")||"";i.type=this.getAttribute("type")||"select";i.checked=jQuery(this).prop("checked")||"";i.name=this.getAttribute("name")||"";t.postdata.push(i)}})})),debugmode===!0&&console.log("json: "+simplisity_stringifyjson(t)),simplisity_stringifyjson(t)}function simplisity_getlistjson(n){var t={listdata:[]},i;return typeof n!="undefined"&&n!==""&&(i=n.split(","),i.forEach(n=>{var i=1;jQuery(n).each(function(){jQuery(this).find("input, textarea, select").each(function(){if(this.getAttribute("s-update")!=="ignore"&&this.id!==""){this.getAttribute("s-datatype")==="coded"?(postvalue=this.value||"",postvalue=simplisity_encode(postvalue)):postvalue=this.value||"";var r={};r.id=this.id||"";r.value=postvalue||"";r.row=i.toString()||"";r.listname=n||"";r["s-update"]=this.getAttribute("s-update")||"";r["s-datatype"]=this.getAttribute("s-datatype")||"";r["s-xpath"]=this.getAttribute("s-xpath")||"";r.type=this.getAttribute("type")||"select";r.checked=jQuery(this).prop("checked")||"";r.name=this.getAttribute("name")||"";t.listdata.push(r)}});i+=1})})),debugmode===!0&&console.log("json: "+simplisity_stringifyjson(t)),simplisity_stringifyjson(t)}function simplisity_mergeJson(n){for(var i,r,t=1;t<arguments.length;t++){i=arguments[t];for(r in i)n[r]=i[r]}return n}function simplisity_removetablerow(n){simplisity_remove(n,"tr")}function simplisity_removelistitem(n){simplisity_remove(n,"li")}function simplisity_removegriditem(n){simplisity_remove(n,"div")}function simplisity_remove(n,t){var r=jQuery(n).attr("s-removelist").replace(".",""),f=jQuery(n).attr("s-index"),u=jQuery(n).parents(t+"[s-index="+f+"]").first().removeClass(r).addClass(r+"_deleted"),i=jQuery(n).attr("s-recylebin");jQuery("#simplisity_recyclebin_"+i).length>0?jQuery("#simplisity_recyclebin_"+i).append(u):u.remove();jQuery('.simplisity_itemundo[s-recylebin="'+i+'"]').show()}function simplisity_undoremovelistitem(n){var u=jQuery(n).attr("s-return"),i=jQuery(n).attr("s-removelist")+"_deleted",r=jQuery(n).attr("s-removelist").replace(".",""),t=jQuery(n).attr("s-recylebin");jQuery("#simplisity_recyclebin_"+t).length>0&&jQuery(u).append(jQuery("#simplisity_recyclebin_"+t).find(i).last().removeClass(r+"_deleted").addClass(r));jQuery("#simplisity_recyclebin_"+t).children(i).length===0&&jQuery('.simplisity_itemundo[s-recylebin="'+t+'"]').hide()}function simplisity_emptyrecyclebin(n){jQuery("#simplisity_recyclebin_"+n).remove();jQuery('.simplisity_itemundo[s-recylebin="'+n+'"]').hide()}function simplisity_getCookieValue(n){var t=document.cookie.match("(^|;)\\s*"+n+"\\s*=\\s*([^;]+)");return t?t.pop():""}function simplisity_setCookieValue(n,t){document.cookie=n+"="+t+";path=/;maxAge: 604800"}function simplisity_deleteCookie(n){simplisity_getCookieValue(n)&&(document.cookie=n+"=;path=/;expires=Thu, 01 Jan 1970 00:00:01 GMT")}function simplisity_replaceAll(n,t,i){return n.replace(new RegExp(t,"g"),i)}function simplisity_setParamField(n,t){if(typeof t!="undefined"&&typeof n!="undefined"&&n!==null&&n!=="null"){simplisity_createTempPageFields();var i=jQuery("#simplisity_params").val(),r={};typeof i!="undefined"&&i!==""&&(r=simplisity_parsejson(i));r[n]=t;jQuery("#simplisity_params").val(simplisity_stringifyjson(r));simplisity_setSessionField(n,t)}}function simplisity_getParamField(n){return simplisity_getField(jQuery("#simplisity_params").val(),n)}function simplisity_getField(n,t){if(typeof n!="undefined"&&n!==""&&typeof t!="undefined"&&t!==""){var i=simplisity_parsejson(n);return i[t]}return""}function simplisity_getsystemkey(n){var t=simplisity_getField(n,"systemkey");return(typeof t=="undefined"||t==="")&&(t=jQuery("#simplisity_systemkey").val()),t}function simplisity_encode(n){var i="",t;if(typeof n!="undefined"&&n!=="")for(t=0;t<n.length;t++)i+=n.charCodeAt(t)+".";return i}function simplisity_decode(n){var r="",i,t;if(typeof n!="undefined"&&n!=="")for(i=n.split("."),t=0;t<i.length;t++)i[t]!==""&&(r+=String.fromCharCode(i[t]));return r}function simplisity_injectlink(n){var t='<link rel="stylesheet" href="'+n+'">';jQuery("head").append(t)}function simplisity_injectscript(n){var t=document.createElement("script");t.src=n;document.head.appendChild(t)}function simplisity_systemkey(){return jQuery("#simplisity_systemkey").val()}function simplisity_sessionjson(){var n=simplisity_getCookieValue("simplisity_sessionparams"),t='{"null":"null"}',i;n&&typeof n!="undefined"&&n!==""&&(t=n);try{return simplisity_stringifyjson(eval("("+t+")"))}catch(r){return i=simplisity_stringifyjson(eval("({'null':'null'})"))}}function simplisity_sessionremove(){simplisity_setCookieValue("simplisity_sessionparams","")}function simplisity_sessionpost(){var r=simplisity_parsejson(simplisity_sessionjson()),i,n,t;for(i of Object.keys(r))simplisity_setParamField(i,r[i]);return n=window.sessionStorage.getItem("browsersessionid"),n||(n=CreateUUID(),window.sessionStorage.setItem("browsersessionid",n)),simplisity_setParamField("browsersessionid",n),simplisity_setSessionField("browsersessionid",n),t=window.localStorage.getItem("browserid"),t||(t=CreateUUID(),window.localStorage.setItem("browserid",t)),simplisity_setParamField("browserid",t),simplisity_setSessionField("browserid",t),jQuery("#simplisity_params").val()}function CreateUUID(){rtn=([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,n=>(n^crypto.getRandomValues(new Uint8Array(1))[0]&15>>n/4).toString(16));var n=new Date;return rtn=rtn+"-"+n.getTime()}function simplisity_setSessionField(n,t){if(typeof t!="undefined"&&n){var i=simplisity_sessionjson(),r={};typeof i!="undefined"&&i!==""&&(r=simplisity_parsejson(i));r[n]=t;simplisity_setCookieValue("simplisity_sessionparams",simplisity_stringifyjson(r))}}function simplisity_getSessionField(n){var t=simplisity_parsejson(simplisity_sessionjson());return simplisity_getField(simplisity_stringifyjson(t),n)}function simplisity_requestjson(n,t,i,r,u,f){simplisityPost(n,t,i,r,"",!1,0,u,!0,f,"",!1,"json")}function simplisity_parsejson(n){return typeof n=="string"?JSON.parse(n):n}function simplisity_stringifyjson(n){return typeof n=="string"?n:JSON.stringify(n)}async function simplisity_initFileUpload(n){var t,i,r,u;try{t=simplisity_getsystemkey(jQuery(n).attr("s-fields"));(t===""||typeof t=="undefined")&&(t=jQuery("#simplisity_systemkey").val());i=jQuery(n).attr("s-regexpr");i===""&&(i="/(.|/)(gif|jpe?g|jpg|png|pdf|zip|xml|json)jQuery/i");r=parseInt(jQuery(n).attr("s-maxfilesize"));r===""&&(r=5e9);u=parseInt(jQuery(n).attr("s-maxchunksize"));u===""&&(u=1e7);jQuery.cleanData(jQuery(n));jQuery(n).off();jQuery(n).parent().unbind("fileuploadprogressall");jQuery(n).parent().unbind("fileuploadsubmit");jQuery(n).parent().unbind("fileuploadadd");jQuery(n).parent().unbind("fileuploaddrop");jQuery(n).parent().unbind("fileuploadstop");jQuery(n).fileupload({url:jQuery(n).attr("s-uploadcmdurl"),maxFileSize:r,maxChunkSize:u,acceptFileTypes:i,dataType:"json",dropZone:jQuery(n).parent(),formData:{systemkey:t}}).prop("disabled",!jQuery.support.fileInput).parent().addClass(jQuery.support.fileInput?undefined:"disabled").bind("fileuploadprogressall",function(n,t){var i=parseInt(t.loaded/t.total*100,10);jQuery("#simplisity-file-progress-bar").show();jQuery(".simplisity-file-progress-bar").css("width",i+"%");jQuery(".simplisity-file-progress-bar").text(i+"%")}).bind("fileuploadsubmit",function(n,t){var i=simplisity_encode(simplisity_generateFileUniqueIdentifier(t));t.headers=jQuery.extend(t.headers,{"X-File-Identifier":i})}).bind("fileuploadadd",function(n,t){jQuery("#simplisity-file-progress-bar").show();jQuery.each(t.files,function(n,t){jQuery('input[id*="simplisity_fileuploadlist"]').val(jQuery('input[id*="simplisity_fileuploadlist"]').val()+simplisity_encode(t.name)+";")})}).bind("fileuploaddrop",function(n,t){jQuery("#simplisity-file-progress-bar").show();jQuery('input[id*="simplisity_fileuploadlist"]').val("");jQuery.each(t.files,function(n,t){jQuery('input[id*="simplisity_fileuploadlist"]').val(jQuery('input[id*="simplisity_fileuploadlist"]').val()+simplisity_encode(t.name)+";")});jQuery(".processing").show()}).bind("fileuploadstop",function(){if(jQuery('input[id*="simplisity_fileuploadlist"]').val()!==""){var t=jQuery(n).attr("s-reload");(typeof t=="undefined"||t==="")&&(t="true");simplisity_callserver(jQuery(n),"","",t);filesdone=0;jQuery(".processing").hide();jQuery("#progress .progress-bar").css("width","0")}})}catch(f){console.log("Error!",f)}}function simplisity_generateFileUniqueIdentifier(n){var t=n.files[0];return result=t.relativePath||t.webkitRelativePath||t.fileName||t.name}function simplisity_assignevents(n){jQuery(".simplisity_change").each(function(t){jQuery(this).attr("s-index",t);jQuery(this).unbind("change");jQuery(this).change(function(){return simplisity_callserver(this,n),!1})});jQuery(".simplisity_click").each(function(t){jQuery(this).attr("s-index",t);jQuery(this).unbind("click");jQuery(this).click(function(){simplisity_callserver(this,n);var t=jQuery(this).attr("s-fields");return typeof jQuery(this).attr("href")!="undefined"&&jQuery(this).attr("href").includes(window.location.hostname)&&history.pushState(t,"Title",jQuery(this).attr("href")),!1})});jQuery(".simplisity_confirmclick").each(function(t){jQuery(this).attr("s-index",t);jQuery(this).unbind("click");jQuery(this).click(function(){if(confirm(jQuery(this).attr("s-confirm")))return simplisity_callserver(this,n),!1})});jQuery(".simplisity_removelistitem").each(function(n){jQuery(this).attr("s-index",n);jQuery(this).parents("li").first().attr("s-index",n);jQuery(this).unbind("click");jQuery(this).click(function(){simplisity_removelistitem(this)})});jQuery(".simplisity_removegriditem").each(function(n){jQuery(this).attr("s-index",n);jQuery(this).parents("div").first().attr("s-index",n);jQuery(this).unbind("click");jQuery(this).click(function(){simplisity_removegriditem(this)})});jQuery(".simplisity_removetablerow").each(function(n){jQuery(this).attr("s-index",n);jQuery(this).parents("tr").first().attr("s-index",n);jQuery(this).unbind("click");jQuery(this).click(function(){simplisity_removetablerow(this)})});jQuery(".simplisity_itemundo").each(function(){if(typeof jQuery(this).attr("s-recylebin")!="undefined"&&typeof jQuery("#simplisity_recyclebin_"+jQuery(this).attr("s-recylebin")).val()=="undefined"){var t='<div id="simplisity_recyclebin_'+jQuery(this).attr("s-recylebin")+'" style="display:none;" ><\/div>',n=document.createElement("span");n.innerHTML=t;document.body.appendChild(n)}jQuery(this).unbind("click");jQuery(this).click(function(){simplisity_undoremovelistitem(this)})});jQuery(".simplisity_fileupload").each(function(){simplisity_initFileUpload("#"+jQuery(this).attr("id"))});jQuery(".simplisity_base64upload").each(function(t){jQuery(this).attr("s-index",t);jQuery(this).unbind("change");jQuery(this).change(function(){return simplisity_base64wait(this,n),!1})});jQuery(".simplisity_filedownload").each(function(){var n="cmd="+jQuery(this).attr("s-cmd"),t=jQuery(this).attr("s-fields"),i,r,u;if(typeof t!="undefined"&&t!==""){i=simplisity_parsejson(t);for(x in i)n=n+"&"+x+"="+simplisity_encode(simplisity_getField(t,x));r=simplisity_getsystemkey(t);n=n+"&systemkey="+r}u=jQuery("#simplisity_cmdurl").val();jQuery(this).attr({href:u+"?"+n})})}function simplisity_sessionfieldaction(){jQuery("input.simplisity_sessionfield").each(function(){var n=simplisity_getSessionField(jQuery(this).attr("id"));typeof n!="undefined"&&n!==""&&jQuery(this).val(n)});jQuery("select.simplisity_sessionfield").each(function(){var n=simplisity_getSessionField(jQuery(this).attr("id")),t;typeof n!="undefined"&&n!==""&&(t=jQuery(this),jQuery("#"+jQuery(this).attr("id")+" > option").each(function(){this.value===n&&jQuery(t).val(n)}))})}async function simplisity_base64wait(n,t){var u=$(n)[0].files,r="",f,i;for(let n=0;n<u.length;n++)r+=simplisity_encode(u[n].name)+"*";r=r.substring(0,r.length-1);$("#simplisity_fileuploadlist").val(r);f=await simplisity_fileListToBase64(u);i="";for(let n=0;n<f.length;n++)i+=f[n];i=i.substring(0,i.length-1);$("#simplisity_fileuploadbase64").val(i);simplisity_callserver(n,t)}async function simplisity_fileListToBase64(n){function i(n){const t=new FileReader;return new Promise(i=>{t.onload=n=>{i(n.target.result+"*")},t.readAsDataURL(n)})}const t=[];for(let r=0;r<n.length;r++)t.push(i(n[r]));return await Promise.all(t)}var ajaxPostCmd=[],debugmode=!1,simplisity_isTextInput,simplisity_isSelect;(function(n){n.fn.getSimplisity=function(n,t,i,r,u){debugmode===!0&&console.log("[$.fn.getSimplisity] ",n,t,"#"+this.attr("id"),i,u);simplisityPost(n,t,u,"#"+this.attr("id"),"",!1,0,i,!0,r,"","","","")}})(jQuery),function(n){n.fn.activateSimplisityPanel=function(t){simplisity_sessionfieldaction();simplisity_assignevents(t);n(this).unbind("change");n(this).change(function(){simplisity_assignevents(t)})}}(jQuery),function(n){n.fn.simplisityStartUp=function(t,i){var r=n.extend({activatepanel:!0,overlayclass:"",debug:!1,hideprocess:!0},i);debugmode=r.debug;simplisity_createStaticPageFields(t,r);simplisity_createTempPageFields();n(".simplisity_panel").each(function(){n(this).attr("s-activepanel",r.activatepanel);ajaxPostCmd.push(this)});simplisity_panelAjaxFunction(ajaxPostCmd[ajaxPostCmd.length-1]);r.hideprocess&&n(".simplisity_loader").hide()}}(jQuery);jQuery(document).on("simplisitypostgetcompleted",simplisity_nbxgetCompleted);simplisity_isTextInput=function(n){var t=n.nodeName;return t==="INPUT"&&n.type.toLowerCase()==="text"};simplisity_isSelect=function(n){var t=n.nodeName;return t==="SELECT"};