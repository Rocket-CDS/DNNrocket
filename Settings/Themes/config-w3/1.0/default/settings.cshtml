@inherits RocketMod.RocketModTokens<Simplisity.SimplisityRazor>
@using DNNrocketAPI;
@using Simplisity;
@using RocketSettings;

@AddProcessData("resourcepath", "/DesktopModules/DNNrocket/api/App_LocalResources/")
@AddProcessData("resourcepath", "/DesktopModules/DNNrocket/SystemData/App_LocalResources/")

@{
    var settingsData = new SettingsData(0, 0, "");
    if (Model.List.Count > 0)
    {
        settingsData = (SettingsData)Model.List.First();
    }

}

<span class="w3-section simplisity_buttons">
    <a class="w3-button w3-teal w3-padding-8 simplisity_click" s-cmd="rocketsettings_add" s-fields='{"tabid":"@(Model.GetSetting("tabid"))","moduleid":"@(Model.GetSetting("moduleid"))","selecteditemid":"@settingsData.Info.ItemID","interfacekey":"rocketsettings"}'>@ButtonText(ButtonTypes.add)</a>
    <span class="w3-button w3-green w3-padding-8 simplisity_click" s-cmd="rocketsettings_save" s-fields='{"tabid":"@(Model.GetSetting("tabid"))","moduleid":"@(Model.GetSetting("moduleid"))","selecteditemid":"@settingsData.Info.ItemID","interfacekey":"rocketsettings"}' s-post="#pluginsettings" s-list=".settingsdata">@ButtonText(ButtonTypes.save)</span>
    <span class="w3-button w3-red w3-padding-8 simplisity_confirmclick" s-confirm="@ResourceKey("DNNrocket.delete","","confirm")" s-cmd="rocketsettings_delete" s-fields='{"tabid":"@(Model.GetSetting("tabid"))","moduleid":"@(Model.GetSetting("moduleid"))","selecteditemid":"@settingsData.Info.ItemID","interfacekey":"rocketsettings"}'>@ButtonText(ButtonTypes.delete)</span>
    <a class="w3-button w3-pale-yellow w3-padding-8 simplisity_itemundo" s-recylebin="settingsbin" s-return="#pluginsettings" s-removelist=".settingsdata" style="display: none;">@ButtonText(ButtonTypes.undo)</a>
</span>


<div class="w3-container">

    <div class="w3-row w3-margin">

        <table id="pluginsettings" class="w3-table-all">

            <tr>
                <th class="w3-half">@ResourceKey("system.name")</th>
                <th class="w3-quarter">@ResourceKey("system.value")</th>
                <th style="width:20px;"></th>
            </tr>

            @{
                var lp3 = 0;
            }
            @foreach (var i in settingsData.List)
            {
                lp3 += 1;

                <tr class="settingsdata">
                    <td class="w3-quarter">
                        <!-- We need "recordkey" hidden fields so language list on the record can be updated/sorted in sync -->
                        @HiddenField(i, "genxml/key1", "", "", false, lp3)
                        @HiddenField(i, "genxml/lang/genxml/key2", "", "", true, lp3)


                        @TextBox(i, "genxml/textbox/name", "class='w3-input w3-border' maxlength='250' autocomplete='off' ", "", false, lp3)
                    </td>
                    <td class="w3-twothird">
                        @TextBox(i, "genxml/textbox/value", "class='w3-input w3-border' maxlength='500' autocomplete='off' ", "", false, lp3)
                    </td>
                    <td style="width:20px;">
                        <a href="javascript:void(0)" class="simplisity_removetablerow" s-removelist=".settingsdata" s-recylebin="settingsbin"><i title="Remove" class="fas fa-minus-square fa-fw fa-lg"></i></a>
                    </td>
                </tr>

            }
        </table>

    </div>
</div>
