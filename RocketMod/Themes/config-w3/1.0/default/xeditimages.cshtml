@inherits RocketMod.RocketModTokens<Simplisity.SimplisityRazor>
@using DNNrocketAPI.Componants;
@using Simplisity;

@using RocketMod;

@AddProcessData("resourcepath", "/DesktopModules/DNNrocket/api/App_LocalResources/")
@AddProcessData("resourcepath", "/DesktopModules/DNNrocketModules/RocketMod/App_LocalResources/")
@AddProcessData("resourcepath", "/DesktopModules/DNNrocket/Images/App_LocalResources/")
@AddProcessData("resourcepath", "/DesktopModules/DNNrocket/RocketMod/App_LocalResources/")

@{

    //NOTE: This template is designed to have 1 imagelist on the template.
    // If more than 1 image list is required, a new template is required.

    var articleData = (ArticleLimpet)Model.List.First();
    var imgLP = 0;
    var datalist = articleData.GetImages();
    var info = articleData.Info;
    var resxpath = articleData.AppThemeRelPath + "/" + articleData.AppThemeVersion + "/resx/";
    var globalSettings = new SystemGlobalData();
}

@AddProcessData("resourcepath", resxpath)


    <div class="w3-bar">
        <div class="w3-bar-item">
            @ImageUploadButton(Model)
        </div>
        <div class="w3-bar-item">
            @CheckBox(info, "genxml/checkbox/showsummary", "&nbsp;" + ResourceKey("RocketMod.showsummary").ToString(), "class='w3-check'")
        </div>
    </div>

<div class="w3-row imagelistdatasection">

    <ul id="imagelistdata" class="w3-ul">

        @foreach (var articleImage in datalist)
        {
            imgLP += 1;

        <li class="imagelist w3-padding w3-border-0  w3-col m12 l6">

            @SortableListIndex(articleImage.Info, imgLP)
            @HiddenField(articleImage.Info,"genxml/hidden/imagepath","","",false,imgLP)

            <div class="w3-row w3-display-container w3-padding w3-card">
                <span id="deleteimagebutton@(imgLP)" onclick="" class="w3-button w3-display-topright simplisity_removelistitem" s-removelist=".imagelist" s-recylebin="imagelistbin">
                    <i title="@ResourceKey("DNNrocket.remove")" class="fas fa-minus-square fa-fw fa-lg"></i>
                </span>
                <div class="w3-col" style="width:140px;">
                    <img src="@ThumbnailImageUrl(articleImage.RelPath, 140, 140,"", globalSettings.PngImage)" class="w3-border" style="width:100%" />
                </div>
                <div class="w3-rest">
                    <div class="w3-row w3-display-container ">
                        <div class="w3-col m3 w3-padding" style="min-width:100px;">
                            <label class="">@ResourceKey("RocketMod.width")</label>
                            @TextBox(articleImage.Info, "genxml/textbox/width", " class='w3-input w3-border' ", "200", false, imgLP)
                        </div>
                        <div class="w3-col m3 w3-padding" style="min-width:100px;">
                            <label class="">@ResourceKey("RocketMod.height")</label>
                            @TextBox(articleImage.Info, "genxml/textbox/height", " class='w3-input w3-border' ", "200", false, imgLP)
                        </div>
                        <div class="w3-col m3 w3-padding w3-display-right " style="">
                            <label class="">@ResourceKey("RocketMod.hidden")</label>
                            @CheckBox(articleImage.Info, "genxml/checkbox/hidden", "", "class='w3-check'", false, false, imgLP)
                        </div>
                    </div>
                    <div class="w3-row">
                        <div class="w3-col m12 w3-padding" style="min-width:100px;">
                            <label class="">@ResourceKey("RocketMod.alt")</label>&nbsp;@EditFlag()
                            @TextBox(articleImage.Info, "genxml/lang/genxml/textbox/alt", " class='w3-input w3-border' ", "", true, imgLP)
                        </div>
                    </div>
                </div>
                <div class="w3-row summarydisplay" style="display:none;">
                    <div class="w3-col m12 w3-padding" style="">
                        <label class="">@ResourceKey("RocketMod.name")</label>&nbsp;@EditFlag()
                        @TextBox(articleImage.Info, "genxml/lang/genxml/textbox/name", " class='w3-input w3-border' ", "", true, imgLP)
                    </div>
                    <div class="w3-col m12 w3-padding" style="">
                        <label class="">@ResourceKey("RocketMod.summary")</label>
                        @TextArea(articleImage.Info, "genxml/lang/genxml/textbox/summary", " class='w3-input w3-border' rows='3' ", "", true, imgLP)
                    </div>
                </div>
            </div>

        </li>

        }
    </ul>


</div>

<script>
    $(document).ready(function () {
        $("#imagelistdata").sortable();
        $("#imagelistdata").disableSelection();

        if (document.getElementById('showsummary').checked) {
            $('.summarydisplay').show();
        }

        $('#showsummary').unbind("click");
        $('#showsummary').click(function () {
            if (document.getElementById('showsummary').checked) {
                $('.summarydisplay').show();
            } else {
                $('.summarydisplay').hide();
            }
        });


    });


</script>
