@inherits DNNrocketAPI.render.RocketModTokens<Simplisity.SimplisityRazor>
@using DNNrocketAPI;
@using System
@using System.Linq
@using System.Xml
@using Simplisity;
@using DNNrocketAPI.Componants;


@AddMetaData("resourcepath", "/DesktopModules/DNNrocket/api/App_LocalResources/")
@AddMetaData("resourcepath", "/DesktopModules/DNNrocket/RocketMod/App_LocalResources/")

@{
    var info = new SimplisityInfo();
    if (Model.List.Count > 0)
    {
        info = (SimplisityInfo)Model.List.First();
    }
}

@if (Model.GetSettingBool("addeditscript"))
{

    <div id="rocketmodmodel_@(Model.ModuleId)" class="w3-modal">
        <div class="w3-modal-content" style="width: 96%;height: 96%;">
            <header class="w3-container w3-theme-d5">
                <span onclick="location.reload();" class="w3-button w3-display-topright">&times;</span>
                <h2>@ResourceKey("RocketMod.edittitle")</h2>
            </header>

            <div class="w3-row" style="height: 100%">
                <iframe id="rocketmodIframe_@(Model.ModuleId)" style="width: 100%; height: 100%;">@ResourceKey("RocketMod.iframesupport")</iframe>
            </div>
        </div>
    </div>

    <script>
    $(document).ready(function () {        
        simplisity_setCookieValue('rocketmod_return', window.location.href);
    });

    function rocketmodeditiframe_@(Model.ModuleId)() {
        simplisity_setCookieValue('editlang', '@(DNNrocketUtils.GetCurrentCulture())');
        $('#rocketmodmodel_@(Model.ModuleId)').show();
        $('.actionMenu').hide();
        document.getElementById('rocketmodIframe_@(Model.ModuleId)').src = "/desktopmodules/dnnrocket/RocketMod/admin.aspx?tabid=@(Model.GetSetting("tabid"))&moduleid=@(Model.ModuleId)&editmode=1"
        }

    function rocketmodadmin_@(Model.ModuleId)() {
        simplisity_setCookieValue('editlang', '@(DNNrocketUtils.GetCurrentCulture())');
        window.location.href = '/desktopmodules/dnnrocket/RocketMod/admin.aspx?tabid=@(Model.GetSetting("tabid"))&moduleid=@(Model.ModuleId)';
    }

    </script>

}
